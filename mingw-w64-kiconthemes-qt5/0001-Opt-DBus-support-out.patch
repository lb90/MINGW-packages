From ec8440e0cb79bd212834bf8e3fcb5f84d70901e3 Mon Sep 17 00:00:00 2001
From: Luca Bacci <luca.bacci982@gmail.com>
Date: Wed, 21 Sep 2022 18:21:06 +0200
Subject: [PATCH] Opt DBus support out

It's causing issues on process exit, see
* https://github.com/msys2/MINGW-packages/issues/13198
* https://bugreports.qt.io/browse/QTBUG-49870
---
 CMakeLists.txt | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index e9f49bb..29f2ba6 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -44,7 +44,7 @@ ecm_setup_version(PROJECT
 set(REQUIRED_QT_VERSION 5.15.2)
 find_package(Qt${QT_MAJOR_VERSION}Widgets ${REQUIRED_QT_VERSION} REQUIRED NO_MODULE)
 find_package(Qt${QT_MAJOR_VERSION}Svg ${REQUIRED_QT_VERSION} REQUIRED NO_MODULE)
-if (NOT ANDROID)
+if (NOT (ANDROID) AND (NOT WIN32))
   find_package(Qt${QT_MAJOR_VERSION}DBus ${REQUIRED_QT_VERSION} REQUIRED NO_MODULE)
 endif()
 
-- 
2.36.1.windows.1

